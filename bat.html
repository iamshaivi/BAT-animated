<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pixel Bat Animation — working</title>
<style>
  html,body {
    height:100%;
    margin:0;
    background:#ffffff;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
  }

  /* container representing one frame (32x32) */
  .bat {
    width: 32px;              /* one frame width */
    height: 32px;             /* one frame height */
    /* optional visual scale — keeps pixel-perfect look */
    transform: scale(6);      
    transform-origin: center;
    /* sprite settings */
    background-repeat: no-repeat;
    background-position: 0 0;
    /* background-size should be total sprite sheet size (6 frames × 32px) */
    background-size: 192px 32px;
    /* crisp nearest-neighbor scaling for pixel art */
    image-rendering: pixelated;
    /* animate across the sheet using 6 steps */
    animation: flap 0.45s steps(6) infinite;
    /* prevent the element from being selectable or having unwanted outline */
    user-select: none;
    -webkit-user-select: none;
  }

  @keyframes flap {
    to { background-position: -192px 0; } /* move left by whole sheet width */
  }

  /* small helper so you can see the canvas for debugging */
  .debug {
    position: absolute;
    bottom: 12px;
    left: 12px;
    font-size:12px;
    color:#444;
    opacity:0.7;
  }
</style>
</head>
<body>

<div class="bat" id="bat"></div>
<div class="debug">Sprite generated by JS</div>

<script>
/*
Generate a 6-frame 32×32 pixel-art spritesheet in JS and use it as the background.
Key fixes compared to original:
 - Draw pixels in a visible color (black by default)
 - Make the element 32×32 so background-size/background-position align with frame counts
 - Use image-rendering: pixelated for crisp scaling
*/

function generateBatSprite(color = '#000') {
  const frames = 6;
  const fw = 32, fh = 32;
  const canvas = document.createElement('canvas');
  canvas.width = frames * fw; // 6 * 32 = 192
  canvas.height = fh;
  const ctx = canvas.getContext('2d', { alpha: true });

  // clear (transparent) — not mandatory, but explicit
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // color for the tiny pixels (was white which blended into white page)
  ctx.fillStyle = color;

  // tiny 2x2 pixel blocks coordinates relative to a frame's origin
  // these coordinates are small and chosen to sit within a 32x32 cell
  const framesData = [
    // frame 1 (wings down)
    [[15,10],[16,10],[14,11],[17,11],[13,12],[18,12],[14,13],[17,13],[15,14],[16,14]],
    // frame 2 (up)
    [[15,9],[16,9],[14,10],[17,10],[13,11],[18,11],[15,13],[16,13]],
    // frame 3 (mid)
    [[15,11],[16,11],[14,12],[17,12],[13,13],[18,13],[15,14],[16,14]],
    // frame 4 (up symmetric)
    [[15,9],[16,9],[14,10],[17,10],[13,11],[18,11],[15,13],[16,13]],
    // frame 5 (same as frame1)
    [[15,10],[16,10],[14,11],[17,11],[13,12],[18,12],[14,13],[17,13],[15,14],[16,14]],
    // frame 6 (same as frame3)
    [[15,11],[16,11],[14,12],[17,12],[13,13],[18,13],[15,14],[16,14]],
  ];

  framesData.forEach((dots, frameIndex) => {
    dots.forEach(([x,y]) => {
      // draw a 2x2 "pixel" block
      ctx.fillRect(frameIndex * fw + x, y, 2, 2);
    });
  });

  // return data URL for CSS background
  return canvas.toDataURL();
}

// set backgroundImage on the element
document.getElementById('bat').style.backgroundImage = `url(${generateBatSprite('#000')})`;

/* 
Optional: If you'd like a different color, call generateBatSprite with hex color:
document.getElementById('bat').style.backgroundImage = `url(${generateBatSprite('#ff0044')})`
*/
</script>
</body>
</html>
