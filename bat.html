<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pixel Bat — Improved</title>
<style>
  html,body {
    height:100%;
    margin:0;
    background:#ffffff;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .bat {
    width: 32px;             /* one frame width */
    height: 32px;            /* one frame height */
    /* Keep pixel-art crisp and scale to taste */
    transform: scale(6);
    transform-origin: center;
    background-repeat: no-repeat;
    background-position: 0 0;
    background-size: 192px 32px; /* 6 frames × 32 */
    image-rendering: pixelated;
    /* sprite-step animation + simultaneous bob (translate/rotate) */
    animation: flap 0.45s steps(6) infinite,
               bob 0.9s ease-in-out infinite alternate;
    user-select:none;
  }

  /* move across the sheet (6 frames) */
  @keyframes flap { to { background-position: -192px 0; } }

  /* subtle body bob & tilt so bat reads as flight, include scale to preserve pixel scale */
  @keyframes bob {
    0%   { transform: scale(6) translateY(0) rotate(-2deg); }
    50%  { transform: scale(6) translateY(-3px) rotate(2deg); }
    100% { transform: scale(6) translateY(0) rotate(-2deg); }
  }

  /* helper for debugging if needed */
  .debug { position: fixed; left:10px; bottom:10px; font-size:12px; color:#555; }
</style>
</head>
<body>

<div class="bat" id="bat"></div>
<div class="debug">Improved sprite — tweak color/scale in script</div>

<script>
/*
Improved frames for a wider-winged bat.
We draw chunky 3x3 "pixels" so the silhouette reads when scaled.
Each frame is 32x32, and we have 6 frames (192x32 sheet).
*/

function generateBatSprite(color = '#111') {
  const frames = 6;
  const fw = 32, fh = 32;
  const pixelSize = 3; // draw 3x3 blocks to make shape readable when scaled
  const canvas = document.createElement('canvas');
  canvas.width = frames * fw;
  canvas.height = fh;
  const ctx = canvas.getContext('2d');

  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = color;

  // Each sub-array is a frame. Coordinates are top-left of a "pixel block" (before multiplying pixelSize)
  // Coordinates chosen to form a head/body and wings that change over frames.
  const framesData = [
    // frame 0 — wings down (wide)
    [
      // body / head
      [15,10],[16,10],[14,11],[15,11],[16,11],[17,11],[14,12],[15,12],[16,12],[17,12],[15,13],[16,13],
      // left wing blobs (down)
      [10,12],[9,13],[8,14],[7,15],[11,11],[12,12],
      // right wing blobs (down) — mirror
      [21,12],[22,13],[23,14],[24,15],[20,11],[19,12],
      // eyes (tiny gaps invented by not drawing)
    ],
    // frame 1 — wings mid-up
    [
      [15,10],[16,10],[14,11],[15,11],[16,11],[17,11],[15,12],[16,12],
      // left wing
      [11,9],[10,10],[9,11],[8,12],[12,10],
      // right wing
      [20,9],[21,10],[22,11],[23,12],[19,10],
    ],
    // frame 2 — wings up (narrow, high)
    [
      [15,10],[16,10],[14,11],[15,11],[16,11],
      // left wing tip up
      [12,7],[11,8],[10,9],[9,10],
      // right wing tip up
      [19,7],[20,8],[21,9],[22,10],
      // small shoulder blobs
      [13,9],[18,9]
    ],
    // frame 3 — wings mid (similar to frame1)
    [
      [15,10],[16,10],[14,11],[15,11],[16,11],[17,11],[15,12],[16,12],
      [11,9],[10,10],[9,11],[8,12],[12,10],
      [20,9],[21,10],[22,11],[23,12],[19,10],
    ],
    // frame 4 — wings down (a slightly different down pose)
    [
      [15,10],[16,10],[14,11],[15,11],[16,11],[17,11],[14,12],[15,12],[16,12],[17,12],
      [10,12],[9,13],[8,14],[7,15],[11,11],[12,12],
      [21,12],[22,13],[23,14],[24,15],[20,11],[19,12],
    ],
    // frame 5 — relaxed mid (tail end)
    [
      [15,11],[16,11],[14,12],[15,12],[16,12],
      [12,10],[11,11],[10,12],
      [20,10],[21,11],[22,12]
    ],
  ];

  // draw each "pixel block" as pixelSize × pixelSize rectangle
  framesData.forEach((dots, frameIndex) => {
    dots.forEach(([x,y]) => {
      // draw block; note we place block as (frameIndex*fw + x, y)
      ctx.fillRect(frameIndex * fw + x, y, pixelSize, pixelSize);
    });
  });

  return canvas.toDataURL();
}

// Apply generated sprite as background
document.getElementById('bat').style.backgroundImage = `url(${generateBatSprite('#0c0c0c')})`;

/* 
Tweak suggestions:
 - To make the bat darker/lighter change the hex color in generateBatSprite('#0c0c0c')
 - To make pixels chunkier use pixelSize larger (change both pixelSize and adjust coordinates if necessary)
 - To change displayed size, adjust CSS transform: scale(6)
 - If you want more frames (smoother wings), add more arrays to framesData and update background-size (frames * fw)
*/
</script>
</body>
</html>